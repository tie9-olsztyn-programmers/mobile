"use strict";(self.webpackChunkmobile=self.webpackChunkmobile||[]).push([[8019],{6562:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>w,frontMatter:()=>d,metadata:()=>t,toc:()=>s});const t=JSON.parse('{"id":"Mobilne w XML i Kotlinie/Listy i dane/ListView/ListaZwlasnymLayoutem","title":"Lista z w\u0142asnym layoutem","description":"- Utw\xf3rzmy nowy projekt Empty Views Activity.","source":"@site/docs/10. Mobilne w XML i Kotlinie/20.Listy i dane/1.ListView/20.ListaZwlasnymLayoutem.mdx","sourceDirName":"10. Mobilne w XML i Kotlinie/20.Listy i dane/1.ListView","slug":"/Mobilne w XML i Kotlinie/Listy i dane/ListView/ListaZwlasnymLayoutem","permalink":"/mobile/docs/Mobilne w XML i Kotlinie/Listy i dane/ListView/ListaZwlasnymLayoutem","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/10. Mobilne w XML i Kotlinie/20.Listy i dane/1.ListView/20.ListaZwlasnymLayoutem.mdx","tags":[],"version":"current","sidebarPosition":20,"frontMatter":{"title":"Lista z w\u0142asnym layoutem"},"sidebar":"tutorialSidebar","previous":{"title":"ListView - wprowadzenie","permalink":"/mobile/docs/Mobilne w XML i Kotlinie/Listy i dane/ListView/IntroListVIew"},"next":{"title":"Lista i lokalny CRUD (JSON, SharedPreferences)","permalink":"/mobile/docs/Mobilne w XML i Kotlinie/Listy i dane/ListView/ListaZJSONem"}}');var a=i(4848),r=i(8453);const d={title:"Lista z w\u0142asnym layoutem"},o="HeroTrainer - aplikacja do treningu postaci RPG",l={},s=[{value:"Model danych",id:"model-danych",level:2},{value:"Layout dla pojedynczego elementu listy",id:"layout-dla-pojedynczego-elementu-listy",level:2},{value:"Tworzymy w\u0142asny adapter",id:"tworzymy-w\u0142asny-adapter",level:2},{value:"Konfigurowanie g\u0142\xf3wnej aktywno\u015bci",id:"konfigurowanie-g\u0142\xf3wnej-aktywno\u015bci",level:2}];function c(n){const e={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsxs)(e.h1,{id:"herotrainer---aplikacja-do-treningu-postaci-rpg",children:[(0,a.jsx)(e.em,{children:"HeroTrainer"})," - aplikacja do treningu postaci RPG"]})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["Utw\xf3rzmy nowy projekt ",(0,a.jsx)(e.em,{children:"Empty Views Activity"}),"."]}),"\n",(0,a.jsx)(e.li,{children:"Trzy obrazki postaci - pobierz."}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"model-danych",children:"Model danych"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["W folderze, gdzie jest ",(0,a.jsx)(e.code,{children:"MainActivity.kt"})," zr\xf3b folder/package ",(0,a.jsx)(e.code,{children:"model"}),"."]}),"\n",(0,a.jsxs)(e.li,{children:["Wewn\u0105trz folderu zr\xf3b ",(0,a.jsx)(e.code,{children:"TrainingEntry.kt"}),":"]}),"\n"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-kotlin",children:"data class TrainingEntry(\n    val heroClass: String,\n    val date: String,\n    val trainingType: String,\n    val rating: Int\n)\n"})}),"\n",(0,a.jsx)(e.h2,{id:"layout-dla-pojedynczego-elementu-listy",children:"Layout dla pojedynczego elementu listy"}),"\n",(0,a.jsxs)(e.p,{children:["W folderze ",(0,a.jsx)(e.code,{children:"res/layout"})," utw\xf3rz nowy plik ",(0,a.jsx)(e.code,{children:"list_item_training.xml"}),":"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-xml",children:'<LinearLayout\n    xmlns:android="http://schemas.android.com/apk/res/android"\n    android:layout_width="match_parent"\n    android:layout_height="wrap_content"\n    android:background="#EEEEEE"\n    android:gravity="center_vertical"\n    android:orientation="horizontal"\n    android:padding="10dp"\n    >\n\n    <ImageView\n        android:id="@+id/heroImageView"\n        android:layout_width="60dp"\n        android:layout_height="60dp"\n        android:layout_marginEnd="10dp"\n        android:src="@drawable/ic_knight" />\n\n    <LinearLayout\n        android:orientation="vertical"\n        android:layout_width="0dp"\n        android:layout_height="wrap_content"\n        android:layout_weight="1">\n\n        <TextView\n            android:id="@+id/heroClassTextView"\n            android:textStyle="bold"\n            android:textSize="18sp"\n            android:text="Rycerz"\n            android:layout_width="wrap_content"\n            android:layout_height="wrap_content" />\n\n        <TextView\n            android:id="@+id/dateAndTypeTextView"\n            android:text="03.12, Trening si\u0142y"\n            android:layout_width="wrap_content"\n            android:layout_height="wrap_content" />\n\n        <RatingBar\n            android:id="@+id/ratingBar"\n            android:numStars="5"\n            android:stepSize="1"\n            android:isIndicator="true"\n            android:rating="4"\n            android:layout_width="wrap_content"\n            android:layout_height="wrap_content" />\n    </LinearLayout>\n</LinearLayout>\n\n'})}),"\n",(0,a.jsx)(e.h2,{id:"tworzymy-w\u0142asny-adapter",children:"Tworzymy w\u0142asny adapter"}),"\n",(0,a.jsx)(e.admonition,{title:"Czym jest Adapter w Androidzie?",type:"tip",children:(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["Adapter to po\u015brednik mi\u0119dzy danymi a wid\u017cetem interfejsu (np. ",(0,a.jsx)(e.code,{children:"ListView"}),", ",(0,a.jsx)(e.code,{children:"Spinner"}),", ",(0,a.jsx)(e.code,{children:"RecyclerView"}),")."]}),"\n",(0,a.jsx)(e.li,{children:"Adapter przekszta\u0142ca dane (np. lista tekst\xf3w, obiekt\xf3w) na elementy widoczne w UI."}),"\n"]})}),"\n",(0,a.jsxs)(e.admonition,{type:"note",children:[(0,a.jsx)(e.mdxAdmonitionTitle,{children:(0,a.jsx)(e.code,{children:"ArrayAdapter"})}),(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-kotlin",children:"val adapter = ArrayAdapter(\n    this,\n    android.R.layout.simple_list_item_1,\n    fruits\n)\nlistView.adapter = adapter\n"})}),(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"this"})," kontekst (np. ",(0,a.jsx)(e.code,{children:"Activity"}),")"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"simple_list_item_1"})," gotowy layout XML (zawiera tylko ",(0,a.jsx)(e.code,{children:"TextView"}),")"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"fruits"})," dane"]}),"\n"]})]}),"\n",(0,a.jsxs)(e.p,{children:["Obok ",(0,a.jsx)(e.code,{children:"MainActivity.kt"})," tworzymy plik ",(0,a.jsx)(e.code,{children:"TrainingAdapter.kt"}),":"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-kotlin",children:'\nclass TrainingAdapter(\n    private val context: Context,\n    private val trainings: List<TrainingEntry>\n) : ArrayAdapter<TrainingEntry>(context, 0, trainings){\n\n    override fun getView(position: Int, convertView: View?, parent: ViewGroup): View {\n        val itemView = convertView ?: LayoutInflater.from(context)\n            .inflate(R.layout.list_item_training, parent, false)\n\n        val entry = trainings[position]\n\n        val heroClassTextView = itemView.findViewById<TextView>(R.id.heroClassTextView)\n        val dateAndType = itemView.findViewById<TextView>(R.id.dateAndTypeTextView)\n        val ratingBar = itemView.findViewById<RatingBar>(R.id.ratingBar)\n        val heroImageView = itemView.findViewById<ImageView>(R.id.heroImageView)\n\n        heroClassTextView.text = entry.heroClass\n        dateAndType.text = "${entry.date}, ${entry.trainingType}"\n        ratingBar.rating =entry.rating.toFloat()\n\n        val imageResId = when (entry.heroClass.lowercase()){\n            "rycerz", "knight" -> R.drawable.ic_knight\n            "mag", "mage" -> R.drawable.ic_mage\n            "\u0142ucznik", "archer" -> R.drawable.ic_archer\n            else -> R.drawable.ic_launcher_foreground\n        }\n        heroImageView.setImageResource(imageResId)\n\n        return itemView\n    }\n}\n\n'})}),"\n",(0,a.jsxs)(e.admonition,{type:"tip",children:[(0,a.jsxs)(e.mdxAdmonitionTitle,{children:["Za co odpowiada metoda ",(0,a.jsx)(e.code,{children:"getView()"})," w adapterze?"]}),(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["tworzy pojedynczy widok (",(0,a.jsx)(e.code,{children:"layout"}),") dla jednego elementu w li\u015bcie (np. w ",(0,a.jsx)(e.code,{children:"ListView"}),", ",(0,a.jsx)(e.code,{children:"Spinner"}),")."]}),"\n"]})]}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.code,{children:"fun getView(position: Int, convertView: View?, parent: ViewGroup): View"}),"\nCo robi ",(0,a.jsx)(e.code,{children:"getView()"}),":"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["Sprawdza, czy istnieje gotowy widok (",(0,a.jsx)(e.code,{children:"convertView"}),"):","\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["Je\u015bli nie, to tworzy nowy z ",(0,a.jsx)(e.code,{children:"LayoutInflater"}),"."]}),"\n",(0,a.jsx)(e.li,{children:"Je\u015bli tak, to u\u017cywa go ponownie (to wa\u017cne dla wydajno\u015bci)."}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["Pobiera dane dla danego ",(0,a.jsx)(e.code,{children:"position"})," z listy obiekt\xf3w."]}),"\n",(0,a.jsx)(e.li,{children:"Wype\u0142nia widok danymi \u2014 np. ustawia teksty, obrazki, oceny itp."}),"\n",(0,a.jsxs)(e.li,{children:["Zwraca gotowy widok, kt\xf3ry zostanie wy\u015bwietlony w ",(0,a.jsx)(e.code,{children:"ListView"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(e.admonition,{type:"info",children:[(0,a.jsxs)(e.mdxAdmonitionTitle,{children:[(0,a.jsx)(e.code,{children:"convertView"})," \u2014 co to daje?"]}),(0,a.jsxs)(e.p,{children:["Bez ",(0,a.jsx)(e.code,{children:"convertView"}),":"]}),(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"dla ka\u017cdego elementu tworzony by\u0142by nowy layout XML,"}),"\n",(0,a.jsx)(e.li,{children:"co zu\u017cywa\u0142oby RAM,"}),"\n",(0,a.jsx)(e.li,{children:"co spowalnia\u0142oby scrollowanie."}),"\n"]}),(0,a.jsxs)(e.p,{children:["Dzi\u0119ki ",(0,a.jsx)(e.code,{children:"convertView"}),", widoki s\u0105 recyklingowane (zamiast tworzy\u0107 nowe \u2013 s\u0105 ponownie u\u017cywane)."]})]}),"\n",(0,a.jsx)(e.h2,{id:"konfigurowanie-g\u0142\xf3wnej-aktywno\u015bci",children:"Konfigurowanie g\u0142\xf3wnej aktywno\u015bci"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.code,{children:"activity_main.xml"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-xml",children:'<LinearLayout\n    xmlns:android="http://schemas.android.com/apk/res/android"\n    xmlns:tools="http://schemas.android.com/tools"\n    android:id="@+id/main"\n    android:layout_width="match_parent"\n    android:layout_height="match_parent"\n    tools:context=".MainActivity"\n    android:padding="10dp"\n    android:orientation="vertical"\n    >\n\n    <TextView\n        android:layout_width="wrap_content"\n        android:layout_height="wrap_content"\n        android:text="HeroTrainer"\n        android:layout_gravity="center"\n        android:textSize="20sp"\n        />\n\n    <ListView\n        android:id="@+id/trainingsListView"\n        android:layout_width="match_parent"\n        android:layout_height="match_parent"\n        android:padding="10dp"/>\n\n\n</LinearLayout>\n\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.code,{children:"MainActivity.kt"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-kotlin",children:'class MainActivity : AppCompatActivity() {\n\n    private lateinit var listView: ListView\n    private lateinit var adapter: TrainingAdapter\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n      //...\n\n        listView = findViewById(R.id.trainingsListView)\n        val dummyTrainings = listOf(\n            TrainingEntry("Mag", "03.12", "Trening magii", 4),\n            TrainingEntry("Rycerz", "04.12", "Trening si\u0142y", 5),\n            TrainingEntry("\u0141ucznik", "05.12", "Trening zr\u0119czno\u015bci", 3),\n            TrainingEntry(heroClass = "Mage", date="06.12", trainingType="Trening mentalny", rating=8 )\n        )\n\n        adapter = TrainingAdapter(this, dummyTrainings)\n        listView.adapter = adapter\n\n         listView.setOnItemClickListener { parent, view, position, id ->\n                    // parent - to ListView, kt\xf3re obs\u0142ugie klikni\u0119cie\n                    // view - widok klikni\u0119tego elementu\n                    val clickedItem = adapter.getItem(position)\n                    Log.d("LIST_CLICK", "Klikni\u0119to: $clickedItem")\n                }\n\n    }\n}\n\n\n\n\n\n\n\n\n'})})]})}function w(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(c,{...n})}):c(n)}},8453:(n,e,i)=>{i.d(e,{R:()=>d,x:()=>o});var t=i(6540);const a={},r=t.createContext(a);function d(n){const e=t.useContext(r);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:d(n.components),t.createElement(r.Provider,{value:e},n.children)}}}]);