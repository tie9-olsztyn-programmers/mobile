"use strict";(self.webpackChunkmobile=self.webpackChunkmobile||[]).push([[1808],{4195:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>m,frontMatter:()=>a,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"Jetpack Compose - mobilne w czystym Kotlinie/Podstawowe komponenty/DaneOdDzieckaDoRodzica","title":"Dane od dziecka do rodzica","description":"- rodzic przekazuje dziecku referencj\u0119 do funkcji","source":"@site/docs/100. Jetpack Compose - mobilne w czystym Kotlinie/10.Podstawowe komponenty/44.DaneOdDzieckaDoRodzica.mdx","sourceDirName":"100. Jetpack Compose - mobilne w czystym Kotlinie/10.Podstawowe komponenty","slug":"/Jetpack Compose - mobilne w czystym Kotlinie/Podstawowe komponenty/DaneOdDzieckaDoRodzica","permalink":"/mobile/docs/Jetpack Compose - mobilne w czystym Kotlinie/Podstawowe komponenty/DaneOdDzieckaDoRodzica","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/100. Jetpack Compose - mobilne w czystym Kotlinie/10.Podstawowe komponenty/44.DaneOdDzieckaDoRodzica.mdx","tags":[],"version":"current","sidebarPosition":44,"frontMatter":{"title":"Dane od dziecka do rodzica"},"sidebar":"tutorialSidebar","previous":{"title":"Dane od rodzica do dziecka","permalink":"/mobile/docs/Jetpack Compose - mobilne w czystym Kotlinie/Podstawowe komponenty/DaneOdRodzicaDoDziecka"},"next":{"title":"Wydzielanie mniejszych Composable","permalink":"/mobile/docs/Jetpack Compose - mobilne w czystym Kotlinie/Podstawowe komponenty/PodzialAplikacji"}}');var r=i(4848),d=i(8453);const a={title:"Dane od dziecka do rodzica"},c="Dane od dziecka do rodzica przez zdarzenia",t={},l=[{value:"Maksymalnie prosty przyk\u0142ad",id:"maksymalnie-prosty-przyk\u0142ad",level:2},{value:"Wprowadzenie",id:"wprowadzenie",level:3},{value:"Przekazywanie funkcji",id:"przekazywanie-funkcji",level:3},{value:"Bardziej z\u0142o\u017cony przyk\u0142ad - jakby gra",id:"bardziej-z\u0142o\u017cony-przyk\u0142ad---jakby-gra",level:2},{value:"Gra <em>5sec Stopwatch</em>",id:"gra-5sec-stopwatch",level:2},{value:"Co b\u0119dzie robi\u0107 rodzi\u0107?",id:"co-b\u0119dzie-robi\u0107-rodzi\u0107",level:3},{value:"Czego dziecko nie b\u0119dzie robi\u0107?",id:"czego-dziecko-nie-b\u0119dzie-robi\u0107",level:3},{value:"Kodujemy rodzica <code>StopGameScreen.kt</code>:",id:"kodujemy-rodzica-stopgamescreenkt",level:3}];function s(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"dane-od-dziecka-do-rodzica-przez-zdarzenia",children:"Dane od dziecka do rodzica przez zdarzenia"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"rodzic przekazuje dziecku referencj\u0119 do funkcji"}),"\n",(0,r.jsx)(n.li,{children:"dziecko wywo\u0142uje t\u0119 funkcj\u0119 przekazuj\u0105c jej dane"}),"\n",(0,r.jsx)(n.li,{children:"rodzic otrzymuje dane"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"maksymalnie-prosty-przyk\u0142ad",children:"Maksymalnie prosty przyk\u0142ad"}),"\n",(0,r.jsx)(n.h3,{id:"wprowadzenie",children:"Wprowadzenie"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Utw\xf3rzmy nowy projekt ",(0,r.jsx)(n.code,{children:"Empty Activity"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Zamiast komponentu ",(0,r.jsx)(n.code,{children:"Greeting"})," zr\xf3bmy komponent ",(0,r.jsx)(n.code,{children:"Parent"}),":"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'@Composable\nfun Parent(){\n    Log.i("tag","Rodzic")\n\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["W ",(0,r.jsx)(n.code,{children:"Logcat"})," powinni\u015bmy przy ",(0,r.jsx)(n.em,{children:"tagu"})," ",(0,r.jsx)(n.code,{children:"tag"})," zobaczy\u0107 napis ",(0,r.jsx)(n.code,{children:"Rodzic"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["W nowym pliku ",(0,r.jsx)(n.code,{children:"Child.kt"})," zdefiniujmy nowy komponent:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"@Composable\nfun Child(name: String){\n    Column() {\n        Text(text=name)\n    }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Ten komponent przyjmuje od rodzica tekst i wy\u015bwietla go w kolumnie.\nU\u017cyjmy go w rodzicu:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'@Composable\nfun Parent(){\n    Log.i("tag","Rodzic")\n    Column() {\n        Child("wiadomo\u015b\u0107 od rodzica")\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"przekazywanie-funkcji",children:"Przekazywanie funkcji"}),"\n",(0,r.jsx)(n.p,{children:"Teraz dziecko przy u\u017cyciu funkcji od rodzica prze\u015ble tekst:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'@Composable\nfun Parent(){\n    Log.i("tag","Rodzic")\n    Column() {\n        Child("wiadomo\u015b\u0107 od rodzica",\n            onEvent = {someValue ->\n                Log.i("tag", "Wys\u0142ano: $someValue")}\n            )\n    }\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'@Composable\nfun Child(name: String, onEvent: (String)-> Unit){\n    Column() {\n        Text(text=name)\n\n        Button(onClick = {onEvent("klik!")}) {\n            Text(text="Naci\u015bnij mnie")\n        }\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"bardziej-z\u0142o\u017cony-przyk\u0142ad---jakby-gra",children:"Bardziej z\u0142o\u017cony przyk\u0142ad - jakby gra"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Parent.kt"})," trzyma stan punkt\xf3w"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Child.kt"})," zg\u0142asza zdarzenie (",(0,r.jsx)(n.code,{children:"+1"})," punkt)"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Skasujmy komponent ",(0,r.jsx)(n.code,{children:"Parent"})," a w jego miejsce wpiszmy ",(0,r.jsx)(n.code,{children:"GameScreen.kt"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:"@Composable\nfun GameScreen(){\n    var score by remember { mutableStateOf(0)}\n\n    ScorePanel(score = score, onAddPoint = { score += 1})\n}\n\n@Preview(showBackground = true)\n@Composable\nfun GameScreenPreview() {\n    DaneOdDzieckaDoRodzicaTheme {\n       GameScreen()\n    }\n}\n\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Nowy plik, nowy komponent ",(0,r.jsx)(n.code,{children:"ScorePanel.kt"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'@Composable\nfun ScorePanel(\n    score: Int,\n    onAddPoint: () -> Unit\n){\n    Column(\n        modifier = Modifier.padding(33.dp),\n        horizontalAlignment = Alignment.CenterHorizontally\n    ) {\n        Text(text="Punkty: $score", fontSize = 30.sp)\n\n        Spacer(Modifier.height(16.dp))\n\n        Button(onClick = onAddPoint) {\n            Text("Dodaj punkt")\n        }\n\n    }\n}\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.h2,{id:"gra-5sec-stopwatch",children:["Gra ",(0,r.jsx)(n.em,{children:"5sec Stopwatch"})]}),"\n",(0,r.jsx)(n.h3,{id:"co-b\u0119dzie-robi\u0107-rodzi\u0107",children:"Co b\u0119dzie robi\u0107 rodzi\u0107?"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["przekazuje stan: ",(0,r.jsx)(n.code,{children:"time"}),", ",(0,r.jsx)(n.code,{children:"result"})]}),"\n",(0,r.jsxs)(n.li,{children:["przekazuje funkcje: ",(0,r.jsx)(n.code,{children:"onStart"}),", ",(0,r.jsx)(n.code,{children:"onStop"})]}),"\n",(0,r.jsxs)(n.li,{children:["dziecko wywo\u0142uje ",(0,r.jsx)(n.em,{children:"callback"}),", rodzic obs\u0142uguje logik\u0119"]}),"\n",(0,r.jsx)(n.li,{children:"rodzic aktualizuje stan, Compose sam renderuje"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"czego-dziecko-nie-b\u0119dzie-robi\u0107",children:"Czego dziecko nie b\u0119dzie robi\u0107?"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"dziecko niczego samo nie liczy"}),"\n",(0,r.jsx)(n.li,{children:"dziecko nie zna logiki gry"}),"\n",(0,r.jsxs)(n.li,{children:["dziecko zg\u0142asza tylko zdarzenia:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"onStart()"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"onStop()"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"rodzic to wszystko obs\u0142uguje"}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"kodujemy-rodzica-stopgamescreenkt",children:["Kodujemy rodzica ",(0,r.jsx)(n.code,{children:"StopGameScreen.kt"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["skasujmy komponent ",(0,r.jsx)(n.code,{children:"GameScreen"})]}),"\n",(0,r.jsxs)(n.li,{children:["dodajmy nowy komponent ",(0,r.jsx)(n.code,{children:"StopGameScreen"})]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'@Composable\nfun StopGameScreen() {\n\n    var time by remember { mutableStateOf(0f) }\n    var running by remember { mutableStateOf(false) }\n    var result by remember { mutableStateOf<String?>(null) }\n\n    LaunchedEffect(running) {\n        if (running) {\n            val start = System.currentTimeMillis()\n            while (running) {\n                val now = System.currentTimeMillis()\n                time = (now - start) / 1000f\n                delay(10)\n            }\n        }\n    }\n\n    GameUI(\n        time = time,\n        result = result,\n        onStart = {\n            time = 0f\n            result = null\n            running = true\n        },\n        onStop = {\n            running = false\n            val diff = abs(time - 5f)\n            result = if (diff < 0.01f) {\n                "Perfekcyjnie!"\n            } else {\n                "Pud\u0142o. Odchy\u0142ka: ${"%.2f".format(diff)} s"\n            }\n        },\n\n    )\n}\n\n\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"LaunchedEffect"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"uruchamia korutyn\u0119 (kod dzia\u0142aj\u0105cy r\xf3wnolegle i nieblokuj\u0105cy UI)"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"LaunchedEffect(running){...}"})," startuje, gdy ",(0,r.jsx)(n.code,{children:"running"}),"=",(0,r.jsx)(n.code,{children:"true"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"val start = System.currentTimeMillis()"})," zapami\u0119tuje czas startu"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"val now = System.currentTimeMillis()"})," oblicza czas aktualny"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"time = (now - start) / 1000f"})," oblicza czas trwania"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["i dziecko ",(0,r.jsx)(n.code,{children:"GameUI.kt"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",children:'\n@Composable\nfun GameUI(\n    time: Float,\n    result: String?,\n    onStart: () -> Unit,\n    onStop: () -> Unit,\n\n) {\n\n    Column(\n        modifier = Modifier\n            .fillMaxSize()\n            .padding(33.dp),\n        horizontalAlignment = Alignment.CenterHorizontally,\n        verticalArrangement = Arrangement.Center\n    ) {\n        Text(\n            text = String.format("%.2f s", time),\n            fontSize = 48.sp\n        )\n\n        Spacer(Modifier.height(16.dp))\n\n        Row{\n            Button(onClick = onStart){\n                Text(text="Start")\n            }\n            Spacer(Modifier.width(16.dp))\n            Button(onClick = onStop) {\n                Text(text = "Stop")\n            }\n        }\n\n        result?.let{\n            Spacer(Modifier.height(32.dp))\n            Text(\n                text = it,\n                fontSize = 24.sp,\n                color = Color.Magenta\n            )\n        }\n    }\n}\n'})})]})}function m(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(s,{...e})}):s(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>c});var o=i(6540);const r={},d=o.createContext(r);function a(e){const n=o.useContext(d);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),o.createElement(d.Provider,{value:n},e.children)}}}]);